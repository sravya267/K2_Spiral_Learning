{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Button,Row,Col}from'react-bootstrap';import{fetchConcepts}from'../services/api';// Import from API service\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ConceptSelector=_ref=>{let{selectedConcepts,setSelectedConcepts,worksheetType}=_ref;const[concepts,setConcepts]=useState([]);const[loading,setLoading]=useState(true);const[apiStatus,setApiStatus]=useState('loading');// Predefined list of all concepts\nconst allConcepts=[{id:'number_sense',name:'Number Sense',icon:'#'},{id:'addition',name:'Addition',icon:'+'},{id:'subtraction',name:'Subtraction',icon:'âˆ’'},{id:'time_telling',name:'Time Telling',icon:'ðŸ•’'},{id:'money_counting',name:'Money',icon:'ðŸ’°'},{id:'place_value',name:'Place Value',icon:'1ï¸âƒ£'},{id:'word_problems',name:'Word Problems',icon:'ðŸ“'},{id:'shapes',name:'Shapes',icon:'â­'},{id:'skip_counting',name:'Skip Counting',icon:'2ï¸âƒ£'},{id:'fractions',name:'Fractions',icon:'Â½'},{id:'measurement',name:'Measurement',icon:'ðŸ“'},{id:'patterns_algebra',name:'Patterns & Algebra',icon:'ðŸ”„'},{id:'graphing_data',name:'Graphing & Data',icon:'ðŸ“Š'},{id:'odd_even',name:'Odd & Even',icon:'ðŸ”¢'}];useEffect(()=>{const loadConcepts=async()=>{try{console.log('Fetching concepts using API service');const data=await fetchConcepts();console.log('API response:',data);// Check if we got a valid response with categories\nif(data&&Object.keys(data).length>0){setConcepts(data);setApiStatus('api_success');console.log('Successfully loaded concepts from API');}else{console.warn('API returned empty data, using fallback');setConcepts(allConcepts);setApiStatus('fallback');}}catch(error){console.error('Error fetching concepts:',error);setConcepts(allConcepts);setApiStatus('api_error');}finally{setLoading(false);}};loadConcepts();},[]);// Added handleConceptToggle function\nconst handleConceptToggle=conceptId=>{// In fluency mode, we only allow one selection\nif(worksheetType==='fluency'){setSelectedConcepts([conceptId]);return;}// In spiral mode, toggle the selection\nsetSelectedConcepts(prev=>prev.includes(conceptId)?prev.filter(id=>id!==conceptId):[...prev,conceptId]);};const selectAll=()=>{if(worksheetType==='fluency'){alert('Fluency Practice mode allows only one concept. Please select concepts individually.');return;}// Use allConcepts to select all concepts\nconst allConceptIds=allConcepts.map(concept=>concept.id);console.log('Selecting All Concepts:',allConceptIds);setSelectedConcepts(allConceptIds);};const deselectAll=()=>{setSelectedConcepts([]);};if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading math concepts...\"});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"concept-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"concept-buttons\",children:[/*#__PURE__*/_jsxs(Button,{variant:\"outline-primary\",size:\"sm\",className:\"select-btn me-2\",onClick:selectAll,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check-double me-1\"}),\" Select All\"]}),/*#__PURE__*/_jsxs(Button,{variant:\"outline-secondary\",size:\"sm\",className:\"select-btn\",onClick:deselectAll,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times me-1\"}),\" Deselect All\"]})]})}),apiStatus!=='api_success'&&/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'10px',padding:'8px',background:'#fff3cd',color:'#856404',borderRadius:'4px'},children:\"Concepts loaded from local configuration\"}),/*#__PURE__*/_jsx(Row,{className:\"concept-grid g-2\",children:allConcepts.map(concept=>/*#__PURE__*/_jsx(Col,{xs:6,sm:4,md:3,children:/*#__PURE__*/_jsxs(\"div\",{className:`concept-chip ${selectedConcepts.includes(concept.id)?'selected':''}`,onClick:()=>handleConceptToggle(concept.id),children:[/*#__PURE__*/_jsx(\"div\",{className:\"concept-icon\",children:concept.icon}),/*#__PURE__*/_jsx(\"div\",{className:\"concept-label\",children:concept.name}),selectedConcepts.includes(concept.id)&&/*#__PURE__*/_jsx(\"div\",{className:\"concept-check\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check\"})})]})},concept.id))})]});};export default ConceptSelector;","map":{"version":3,"names":["React","useState","useEffect","Button","Row","Col","fetchConcepts","jsx","_jsx","jsxs","_jsxs","ConceptSelector","_ref","selectedConcepts","setSelectedConcepts","worksheetType","concepts","setConcepts","loading","setLoading","apiStatus","setApiStatus","allConcepts","id","name","icon","loadConcepts","console","log","data","Object","keys","length","warn","error","handleConceptToggle","conceptId","prev","includes","filter","selectAll","alert","allConceptIds","map","concept","deselectAll","children","className","variant","size","onClick","style","marginBottom","padding","background","color","borderRadius","xs","sm","md"],"sources":["/Users/sravya/Desktop/K2_Spiral_Learning/frontend/src/components/ConceptSelector.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Button, Row, Col } from 'react-bootstrap';\nimport { fetchConcepts } from '../services/api'; // Import from API service\n\nconst ConceptSelector = ({ selectedConcepts, setSelectedConcepts, worksheetType }) => {\n  const [concepts, setConcepts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [apiStatus, setApiStatus] = useState('loading');\n\n  // Predefined list of all concepts\n  const allConcepts = [\n    { id: 'number_sense', name: 'Number Sense', icon: '#' },\n    { id: 'addition', name: 'Addition', icon: '+' },\n    { id: 'subtraction', name: 'Subtraction', icon: 'âˆ’' },\n    { id: 'time_telling', name: 'Time Telling', icon: 'ðŸ•’' },\n    { id: 'money_counting', name: 'Money', icon: 'ðŸ’°' },\n    { id: 'place_value', name: 'Place Value', icon: '1ï¸âƒ£' },\n    { id: 'word_problems', name: 'Word Problems', icon: 'ðŸ“' },\n    { id: 'shapes', name: 'Shapes', icon: 'â­' },\n    { id: 'skip_counting', name: 'Skip Counting', icon: '2ï¸âƒ£' },\n    { id: 'fractions', name: 'Fractions', icon: 'Â½' },\n    { id: 'measurement', name: 'Measurement', icon: 'ðŸ“' },\n    { id: 'patterns_algebra', name: 'Patterns & Algebra', icon: 'ðŸ”„' },\n    { id: 'graphing_data', name: 'Graphing & Data', icon: 'ðŸ“Š' },\n    { id: 'odd_even', name: 'Odd & Even', icon: 'ðŸ”¢' }\n  ];\n\n  useEffect(() => {\n    const loadConcepts = async () => {\n      try {\n        console.log('Fetching concepts using API service');\n        const data = await fetchConcepts();\n        console.log('API response:', data);\n        \n        // Check if we got a valid response with categories\n        if (data && Object.keys(data).length > 0) {\n          setConcepts(data);\n          setApiStatus('api_success');\n          console.log('Successfully loaded concepts from API');\n        } else {\n          console.warn('API returned empty data, using fallback');\n          setConcepts(allConcepts);\n          setApiStatus('fallback');\n        }\n      } catch (error) {\n        console.error('Error fetching concepts:', error);\n        setConcepts(allConcepts);\n        setApiStatus('api_error');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadConcepts();\n  }, []);\n\n  // Added handleConceptToggle function\n  const handleConceptToggle = (conceptId) => {\n    // In fluency mode, we only allow one selection\n    if (worksheetType === 'fluency') {\n      setSelectedConcepts([conceptId]);\n      return;\n    }\n\n    // In spiral mode, toggle the selection\n    setSelectedConcepts(prev =>\n      prev.includes(conceptId)\n        ? prev.filter(id => id !== conceptId)\n        : [...prev, conceptId]\n    );\n  };\n\n  const selectAll = () => {\n    if (worksheetType === 'fluency') {\n      alert('Fluency Practice mode allows only one concept. Please select concepts individually.');\n      return;\n    }\n\n    // Use allConcepts to select all concepts\n    const allConceptIds = allConcepts.map(concept => concept.id);\n    console.log('Selecting All Concepts:', allConceptIds);\n\n    setSelectedConcepts(allConceptIds);\n  };\n\n  const deselectAll = () => {\n    setSelectedConcepts([]);\n  };\n\n  if (loading) {\n    return <div>Loading math concepts...</div>;\n  }\n\n  return (\n    <div>\n      <div className=\"concept-header\">\n        <div className=\"concept-buttons\">\n          <Button\n            variant=\"outline-primary\"\n            size=\"sm\"\n            className=\"select-btn me-2\"\n            onClick={selectAll}\n          >\n            <i className=\"fas fa-check-double me-1\"></i> Select All\n          </Button>\n          <Button\n            variant=\"outline-secondary\"\n            size=\"sm\"\n            className=\"select-btn\"\n            onClick={deselectAll}\n          >\n            <i className=\"fas fa-times me-1\"></i> Deselect All\n          </Button>\n        </div>\n      </div>\n\n      {apiStatus !== 'api_success' && (\n        <div style={{\n          marginBottom: '10px',\n          padding: '8px',\n          background: '#fff3cd',\n          color: '#856404',\n          borderRadius: '4px'\n        }}>\n          Concepts loaded from local configuration\n        </div>\n      )}\n\n      <Row className=\"concept-grid g-2\">\n        {allConcepts.map(concept => (\n          <Col xs={6} sm={4} md={3} key={concept.id}>\n            <div\n              className={`concept-chip ${selectedConcepts.includes(concept.id) ? 'selected' : ''}`}\n              onClick={() => handleConceptToggle(concept.id)}\n            >\n              <div className=\"concept-icon\">\n                {concept.icon}\n              </div>\n              <div className=\"concept-label\">{concept.name}</div>\n              {selectedConcepts.includes(concept.id) && (\n                <div className=\"concept-check\">\n                  <i className=\"fas fa-check\"></i>\n                </div>\n              )}\n            </div>\n          </Col>\n        ))}\n      </Row>\n    </div>\n  );\n};\n\nexport default ConceptSelector;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}