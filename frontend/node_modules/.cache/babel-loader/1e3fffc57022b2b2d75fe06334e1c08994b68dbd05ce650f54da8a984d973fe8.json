{"ast":null,"code":"import React,{useState}from'react';import{Row,Col,Form,Button,Card}from'react-bootstrap';import WorksheetTypeSelector from'./WorksheetTypeSelector';import DifficultySelector from'./DifficultySelector';import ConceptSelector from'./ConceptSelector';import{generateWorksheet,downloadWorksheetPDF}from'../services/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const WorksheetForm=()=>{const[worksheetType,setWorksheetType]=useState('spiral');const[difficulty,setDifficulty]=useState('beginner');const[selectedConcepts,setSelectedConcepts]=useState([]);const[includeAnswerKey,setIncludeAnswerKey]=useState(false);const[isGenerating,setIsGenerating]=useState(false);const handleSubmit=async e=>{e.preventDefault();if(selectedConcepts.length===0){alert('Please select at least one math concept');return;}if(worksheetType==='fluency'&&selectedConcepts.length>1){alert('Fluency Practice mode allows only one concept. Please select only one concept.');return;}setIsGenerating(true);try{// Create request data \nconst requestData={worksheet_type:worksheetType,number_range:difficulty,// We'll keep using number_range here since our api.js will handle the mapping\nconcepts:selectedConcepts,include_answer_key:includeAnswerKey};// Let the api.js function handle all the details\nconst pdfBlob=await generateWorksheet(requestData);// Use the helper function to download\ndownloadWorksheetPDF(pdfBlob,`math_worksheet_${worksheetType}_${difficulty}.pdf`);}catch(error){console.error('Error generating worksheet:',error);alert('Error connecting to server. Please try again later.');}finally{setIsGenerating(false);}};return/*#__PURE__*/_jsx(Card,{className:\"form-card\",children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Form,{id:\"worksheetForm\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-steps\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"step\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"step-number\",children:\"1\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"step-content worksheet-type-step\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"step-title\",children:\"Choose Worksheet Type\"}),/*#__PURE__*/_jsx(WorksheetTypeSelector,{worksheetType:worksheetType,setWorksheetType:setWorksheetType})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"step\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"step-number\",children:\"2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"step-step-content difficulty-type-step\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"step-title\",children:\"Select Difficulty Level\"}),/*#__PURE__*/_jsx(DifficultySelector,{difficulty:difficulty,setDifficulty:setDifficulty})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"step\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"step-number\",children:\"3\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"step-content\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"step-title\",children:\"Choose Math Concepts\"}),/*#__PURE__*/_jsx(ConceptSelector,{selectedConcepts:selectedConcepts,setSelectedConcepts:setSelectedConcepts,worksheetType:worksheetType})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-footer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"answer-key-toggle\",children:/*#__PURE__*/_jsx(Form.Check,{type:\"switch\",id:\"includeAnswerKey\",checked:includeAnswerKey,onChange:e=>setIncludeAnswerKey(e.target.checked),label:\"Include Answer Key\"})}),/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"generate-btn\",disabled:isGenerating,children:isGenerating?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"spinner-border spinner-border-sm me-2\",role:\"status\",\"aria-hidden\":\"true\"}),\"Generating...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-file-download me-2\"}),\"Generate Worksheet\"]})})]})]})})});};export default WorksheetForm;","map":{"version":3,"names":["React","useState","Row","Col","Form","Button","Card","WorksheetTypeSelector","DifficultySelector","ConceptSelector","generateWorksheet","downloadWorksheetPDF","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","WorksheetForm","worksheetType","setWorksheetType","difficulty","setDifficulty","selectedConcepts","setSelectedConcepts","includeAnswerKey","setIncludeAnswerKey","isGenerating","setIsGenerating","handleSubmit","e","preventDefault","length","alert","requestData","worksheet_type","number_range","concepts","include_answer_key","pdfBlob","error","console","className","children","Body","id","onSubmit","Check","type","checked","onChange","target","label","disabled","role"],"sources":["/Users/sravya/Desktop/K2_Spiral_Learning/frontend/src/components/WorksheetForm.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Row, Col, Form, Button, Card } from 'react-bootstrap';\nimport WorksheetTypeSelector from './WorksheetTypeSelector';\nimport DifficultySelector from './DifficultySelector';\nimport ConceptSelector from './ConceptSelector';\nimport { generateWorksheet, downloadWorksheetPDF } from '../services/api';\n\nconst WorksheetForm = () => {\n  const [worksheetType, setWorksheetType] = useState('spiral');\n  const [difficulty, setDifficulty] = useState('beginner');\n  const [selectedConcepts, setSelectedConcepts] = useState([]);\n  const [includeAnswerKey, setIncludeAnswerKey] = useState(false);\n  const [isGenerating, setIsGenerating] = useState(false);\n  \n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (selectedConcepts.length === 0) {\n      alert('Please select at least one math concept');\n      return;\n    }\n    \n    if (worksheetType === 'fluency' && selectedConcepts.length > 1) {\n      alert('Fluency Practice mode allows only one concept. Please select only one concept.');\n      return;\n    }\n    \n    setIsGenerating(true);\n    \n    try {\n      // Create request data \n      const requestData = {\n        worksheet_type: worksheetType,\n        number_range: difficulty, // We'll keep using number_range here since our api.js will handle the mapping\n        concepts: selectedConcepts,\n        include_answer_key: includeAnswerKey\n      };\n      \n      // Let the api.js function handle all the details\n      const pdfBlob = await generateWorksheet(requestData);\n      \n      // Use the helper function to download\n      downloadWorksheetPDF(pdfBlob, `math_worksheet_${worksheetType}_${difficulty}.pdf`);\n      \n    } catch (error) {\n      console.error('Error generating worksheet:', error);\n      alert('Error connecting to server. Please try again later.');\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n  \n  return (\n    <Card className=\"form-card\">\n      <Card.Body>\n        <Form id=\"worksheetForm\" onSubmit={handleSubmit}>\n          <div className=\"form-steps\">\n            <div className=\"step\">\n              <div className=\"step-number\">1</div>\n              <div className=\"step-content worksheet-type-step\">\n                <h3 className=\"step-title\">Choose Worksheet Type</h3>\n                <WorksheetTypeSelector \n                  worksheetType={worksheetType} \n                  setWorksheetType={setWorksheetType} \n                />\n              </div>\n            </div>\n            \n            <div className=\"step\">\n              <div className=\"step-number\">2</div>\n              <div className=\"step-step-content difficulty-type-step\">\n                <h3 className=\"step-title\">Select Difficulty Level</h3>\n                <DifficultySelector \n                  difficulty={difficulty} \n                  setDifficulty={setDifficulty} \n                />\n              </div>\n            </div>\n            \n            <div className=\"step\">\n              <div className=\"step-number\">3</div>\n              <div className=\"step-content\">\n                <h3 className=\"step-title\">Choose Math Concepts</h3>\n                <ConceptSelector \n                  selectedConcepts={selectedConcepts}\n                  setSelectedConcepts={setSelectedConcepts}\n                  worksheetType={worksheetType}\n                />\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"form-footer\">\n            <div className=\"answer-key-toggle\">\n              <Form.Check\n                type=\"switch\"\n                id=\"includeAnswerKey\"\n                checked={includeAnswerKey}\n                onChange={(e) => setIncludeAnswerKey(e.target.checked)}\n                label=\"Include Answer Key\"\n              />\n            </div>\n            \n            <Button \n              type=\"submit\" \n              className=\"generate-btn\"\n              disabled={isGenerating}\n            >\n              {isGenerating ? (\n                <>\n                  <span className=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>\n                  Generating...\n                </>\n              ) : (\n                <>\n                  <i className=\"fas fa-file-download me-2\"></i>\n                  Generate Worksheet\n                </>\n              )}\n            </Button>\n          </div>\n        </Form>\n      </Card.Body>\n    </Card>\n  );\n};\n\nexport default WorksheetForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}