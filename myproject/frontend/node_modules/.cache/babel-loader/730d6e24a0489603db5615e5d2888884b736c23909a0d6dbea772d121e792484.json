{"ast":null,"code":"import React,{useState}from'react';import{Row,Col,Form,Button,Card}from'react-bootstrap';import WorksheetTypeSelector from'./WorksheetTypeSelector';import DifficultySelector from'./DifficultySelector';import ConceptSelector from'./ConceptSelector';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const WorksheetForm=()=>{const[worksheetType,setWorksheetType]=useState('spiral');const[difficulty,setDifficulty]=useState('beginner');const[selectedConcepts,setSelectedConcepts]=useState([]);const[includeAnswerKey,setIncludeAnswerKey]=useState(false);const[isGenerating,setIsGenerating]=useState(false);const handleSubmit=async e=>{e.preventDefault();if(selectedConcepts.length===0){alert('Please select at least one math concept');return;}if(worksheetType==='fluency'&&selectedConcepts.length>1){alert('Fluency Practice mode allows only one concept. Please select only one concept.');return;}setIsGenerating(true);try{// Use API format that matches your backend\nconst response=await fetch('/api/generate-worksheet',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({worksheet_type:worksheetType,difficulty:difficulty,concepts:selectedConcepts,include_answer_key:includeAnswerKey,question_count:15// Default value\n})});if(!response.ok){throw new Error('Failed to generate worksheet');}const data=await response.json();// Download the file using the URL from the response\nwindow.location.href=data.download_url;}catch(error){console.error('Error generating worksheet:',error);alert('Error connecting to server. Please try again later.');}finally{setIsGenerating(false);}};return/*#__PURE__*/_jsx(Card,{className:\"form-card\",children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Form,{id:\"worksheetForm\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-steps\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"step\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"step-number\",children:\"1\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"step-content\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"step-title\",children:\"Choose Worksheet Type\"}),/*#__PURE__*/_jsx(WorksheetTypeSelector,{worksheetType:worksheetType,setWorksheetType:setWorksheetType})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"step\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"step-number\",children:\"2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"step-content\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"step-title\",children:\"Select Difficulty Level\"}),/*#__PURE__*/_jsx(DifficultySelector,{difficulty:difficulty,setDifficulty:setDifficulty})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"step\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"step-number\",children:\"3\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"step-content\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"step-title\",children:\"Choose Math Concepts\"}),/*#__PURE__*/_jsx(ConceptSelector,{selectedConcepts:selectedConcepts,setSelectedConcepts:setSelectedConcepts,worksheetType:worksheetType})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-footer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"answer-key-toggle\",children:/*#__PURE__*/_jsx(Form.Check,{type:\"switch\",id:\"includeAnswerKey\",checked:includeAnswerKey,onChange:e=>setIncludeAnswerKey(e.target.checked),label:\"Include Answer Key\"})}),/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"generate-btn\",disabled:isGenerating,children:isGenerating?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"spinner-border spinner-border-sm me-2\",role:\"status\",\"aria-hidden\":\"true\"}),\"Generating...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-file-download me-2\"}),\"Generate Worksheet\"]})})]})]})})});};export default WorksheetForm;","map":{"version":3,"names":["React","useState","Row","Col","Form","Button","Card","WorksheetTypeSelector","DifficultySelector","ConceptSelector","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","WorksheetForm","worksheetType","setWorksheetType","difficulty","setDifficulty","selectedConcepts","setSelectedConcepts","includeAnswerKey","setIncludeAnswerKey","isGenerating","setIsGenerating","handleSubmit","e","preventDefault","length","alert","response","fetch","method","headers","body","JSON","stringify","worksheet_type","concepts","include_answer_key","question_count","ok","Error","data","json","window","location","href","download_url","error","console","className","children","Body","id","onSubmit","Check","type","checked","onChange","target","label","disabled","role"],"sources":["/home/sravya1/K2_Spiral_Learning/frontend/src/components/WorksheetForm.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Row, Col, Form, Button, Card } from 'react-bootstrap';\nimport WorksheetTypeSelector from './WorksheetTypeSelector';\nimport DifficultySelector from './DifficultySelector';\nimport ConceptSelector from './ConceptSelector';\n\nconst WorksheetForm = () => {\n  const [worksheetType, setWorksheetType] = useState('spiral');\n  const [difficulty, setDifficulty] = useState('beginner');\n  const [selectedConcepts, setSelectedConcepts] = useState([]);\n  const [includeAnswerKey, setIncludeAnswerKey] = useState(false);\n  const [isGenerating, setIsGenerating] = useState(false);\n  \n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (selectedConcepts.length === 0) {\n      alert('Please select at least one math concept');\n      return;\n    }\n    \n    if (worksheetType === 'fluency' && selectedConcepts.length > 1) {\n      alert('Fluency Practice mode allows only one concept. Please select only one concept.');\n      return;\n    }\n    \n    setIsGenerating(true);\n    \n    try {\n      // Use API format that matches your backend\n      const response = await fetch('/api/generate-worksheet', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          worksheet_type: worksheetType,\n          difficulty: difficulty,\n          concepts: selectedConcepts,\n          include_answer_key: includeAnswerKey,\n          question_count: 15 // Default value\n        })\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to generate worksheet');\n      }\n      \n      const data = await response.json();\n      \n      // Download the file using the URL from the response\n      window.location.href = data.download_url;\n      \n    } catch (error) {\n      console.error('Error generating worksheet:', error);\n      alert('Error connecting to server. Please try again later.');\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n  \n  return (\n    <Card className=\"form-card\">\n      <Card.Body>\n        <Form id=\"worksheetForm\" onSubmit={handleSubmit}>\n          <div className=\"form-steps\">\n            <div className=\"step\">\n              <div className=\"step-number\">1</div>\n              <div className=\"step-content\">\n                <h3 className=\"step-title\">Choose Worksheet Type</h3>\n                <WorksheetTypeSelector \n                  worksheetType={worksheetType} \n                  setWorksheetType={setWorksheetType} \n                />\n              </div>\n            </div>\n            \n            <div className=\"step\">\n              <div className=\"step-number\">2</div>\n              <div className=\"step-content\">\n                <h3 className=\"step-title\">Select Difficulty Level</h3>\n                <DifficultySelector \n                  difficulty={difficulty} \n                  setDifficulty={setDifficulty} \n                />\n              </div>\n            </div>\n            \n            <div className=\"step\">\n              <div className=\"step-number\">3</div>\n              <div className=\"step-content\">\n                <h3 className=\"step-title\">Choose Math Concepts</h3>\n                <ConceptSelector \n                  selectedConcepts={selectedConcepts}\n                  setSelectedConcepts={setSelectedConcepts}\n                  worksheetType={worksheetType}\n                />\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"form-footer\">\n            <div className=\"answer-key-toggle\">\n              <Form.Check\n                type=\"switch\"\n                id=\"includeAnswerKey\"\n                checked={includeAnswerKey}\n                onChange={(e) => setIncludeAnswerKey(e.target.checked)}\n                label=\"Include Answer Key\"\n              />\n            </div>\n            \n            <Button \n              type=\"submit\" \n              className=\"generate-btn\"\n              disabled={isGenerating}\n            >\n              {isGenerating ? (\n                <>\n                  <span className=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>\n                  Generating...\n                </>\n              ) : (\n                <>\n                  <i className=\"fas fa-file-download me-2\"></i>\n                  Generate Worksheet\n                </>\n              )}\n            </Button>\n          </div>\n        </Form>\n      </Card.Body>\n    </Card>\n  );\n};\n\nexport default WorksheetForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}